compute_engine_instance:
  platform: freebsd
  image_project: freebsd-org-cloud-dev
  image: freebsd-13-0-release-amd64
  cpu: 1
  memory: 4G

task:
  name: Test all packages in the PKG repository build
  install_script:
  - mkdir -p /usr/local/etc/pkg/repos
  - cat FreeBSD.conf > /usr/local/etc/pkg/repos/FreeBSD.conf 
  - pkg install -y pkgconf pango librsvg2-rust icu git-lite libxcb xcb-util xcb-util-wm xcb-util-image xcb libX11 mesa-libs glew libXcomposite libXfixes libXinerama # TODO what was glew for again?
  setup_script: # copying the FreeBSD Cirrus CI 'setup_script'
  - uname -a
  - df -h
  - pkg --version
  script:
  - sh build.sh aquabsd.alps nvidia
  post_script:
  - ls -la .build/
  - df -h
  packages_artifacts:
    path: ".build/*"
